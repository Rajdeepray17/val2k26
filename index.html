<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Rose Day, Sadia</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Nunito:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CORE THEME --- */
        :root {
            --soft-pink: #fff0f3;
            --deep-rose: #c9184a;
            --dusty-rose: #ff4d6d;
            --gold: #ffb703;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(180deg, #fff0f3 0%, #ffe3e9 20%, #fff0f3 40%, #ffd6e0 100%);
            color: #590d22;
            overflow-x: hidden;
            min-height: 100vh;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="%23ff4d6d"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') 12 12, auto;
        }

        h1, h2, h3, .romantic-font {
            font-family: 'Dancing Script', cursive;
        }
        
        .serif-font {
            font-family: 'Playfair Display', serif;
        }

        /* --- ANIMATIONS --- */
        .petal {
            position: fixed;
            top: -10vh;
            background-color: #ffb3c1;
            border-radius: 150% 0 150% 0;
            opacity: 0.8;
            z-index: 0;
            pointer-events: none;
            animation: fall linear forwards;
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* Glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.9);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.05);
        }

        /* Polaroid Hover */
        .polaroid {
            background: white;
            padding: 1rem;
            padding-bottom: 3.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: rotate(-3deg);
            transition: all 0.4s ease;
        }
        .polaroid:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
            box-shadow: 0 20px 40px rgba(199, 24, 74, 0.2);
        }

        /* Interactive Petal */
        .click-petal {
            cursor: pointer;
            transition: all 0.4s ease;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        .click-petal:hover { transform: scale(1.1); }
        .click-petal.revealed {
            transform: scale(0);
            opacity: 0;
        }

        /* --- TIMELINE SPECIFIC --- */
        .timeline-line-bg {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #e5e7eb; /* Light gray initially */
            transform: translateX(-50%);
            z-index: 0;
        }
        .timeline-line-fill {
            position: absolute;
            left: 50%;
            top: 0;
            width: 4px;
            background: #ff4d6d; /* Fills with pink */
            transform: translateX(-50%);
            z-index: 1;
            transition: height 1s ease;
        }
        .timeline-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 3. Coupons */
        .coupon-card {
            background: repeating-linear-gradient(
                135deg,
                #fff0f3,
                #fff0f3 10px,
                #ffffff 10px,
                #ffffff 20px
            );
            border: 2px dashed #ff4d6d;
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }
        .coupon-card:hover { transform: translateY(-5px); }
        .coupon-card.redeemed { opacity: 0.7; filter: grayscale(0.5); }
        .coupon-stamp {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg) scale(3);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
        }
        .coupon-card.redeemed .coupon-stamp {
            opacity: 0.8;
            transform: translate(-50%, -50%) rotate(-15deg) scale(1);
        }

        /* 3. Grow Rose */
        .water-btn:active { transform: rotate(-15deg) scale(0.95); }

        /* Game & Utilities */
        #game-canvas {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 1rem;
            cursor: crosshair;
            touch-action: none;
        }
        .custom-audio {
            background: #fff;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .btn-disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* Sparkle & Cat */
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff4d6d;
            border-radius: 50%;
            pointer-events: none;
            opacity: 1;
            z-index: 9999;
            animation: sparkle-anim 0.8s linear forwards;
            box-shadow: 0 0 5px #ff4d6d, 0 0 10px #ffb3c1;
        }
        @keyframes sparkle-anim {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0) translate(0, 20px); opacity: 0; }
        }

        .kitty-container {
            position: fixed;
            bottom: 20px; left: 20px;
            z-index: 50;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .kitty-container:hover { transform: scale(1.1); }
        .kitty-bubble {
            position: absolute;
            bottom: 100%; left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            width: 140px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease, bottom 0.3s ease;
            color: #c9184a;
            font-weight: bold;
        }
        .kitty-bubble.show { opacity: 1; bottom: 110%; }
        .kitty-bubble::after {
            content: '';
            position: absolute;
            top: 100%; left: 50%;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: white transparent transparent transparent;
        }
        .cat-heart {
            position: fixed;
            color: #c9184a;
            font-size: 20px;
            pointer-events: none;
            animation: floatUp 1.5s ease-out forwards;
            z-index: 51;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body class="relative">
    <a href="valentine.html" class="fixed top-4 right-4 z-50 w-8 h-8 flex items-center justify-center rounded-full bg-white/80 text-rose-600 shadow-md hover:scale-110 transition" aria-label="Go to Valentine">üåπ</a>

    <div id="petals-container"></div>

    <div class="kitty-container" id="kitty" onclick="petTheCat()">
        <div class="kitty-bubble" id="kitty-bubble">Meow! (Hi Tanwie!)</div>
        <svg width="80" height="80" viewBox="0 0 100 100" fill="none" class="drop-shadow-lg">
            <g id="cat-head">
                <path d="M20 75C20 75 10 35 30 25C30 25 35 10 50 10C65 10 70 25 70 25C90 35 80 75 80 75L20 75Z" fill="#FFF0F3" stroke="#FF4D6D" stroke-width="3"/>
                <path d="M30 25L38 40H22L30 25Z" fill="#FFB3C1"/>
                <path d="M70 25L78 40H62L70 25Z" fill="#FFB3C1"/>
                <circle cx="38" cy="50" r="4" fill="#590D22"/>
                <circle cx="62" cy="50" r="4" fill="#590D22"/>
                <path d="M47 58L53 58L50 62L47 58Z" fill="#FF4D6D"/>
                <path d="M50 62Q45 68 40 65" stroke="#590D22" stroke-width="2" stroke-linecap="round"/>
                <path d="M50 62Q55 68 60 65" stroke="#590D22" stroke-width="2" stroke-linecap="round"/>
                <line x1="25" y1="55" x2="10" y2="50" stroke="#FFB3C1" stroke-width="2"/>
                <line x1="25" y1="60" x2="10" y2="60" stroke="#FFB3C1" stroke-width="2"/>
                <line x1="75" y1="55" x2="90" y2="50" stroke="#FFB3C1" stroke-width="2"/>
                <line x1="75" y1="60" x2="90" y2="60" stroke="#FFB3C1" stroke-width="2"/>
            </g>
        </svg>
    </div>

    <div class="relative z-10 max-w-3xl mx-auto px-4 py-8 flex flex-col items-center gap-16">

        <header class="text-center mt-12 animate-fade-in-down">
            <div class="inline-block relative">
                <span class="text-6xl md:text-8xl font-bold text-rose-600 romantic-font drop-shadow-sm select-none" id="main-title">
                    Happy Rose Day
                </span>
                <div class="absolute -right-6 -top-6 text-5xl animate-bounce">üåπ</div>
            </div>
            <h2 class="text-3xl md:text-4xl mt-4 text-rose-400 font-light romantic-font">
                My Dearest Sadia
            </h2>
        </header>

        <section class="w-full flex justify-center py-6">
            <div class="polaroid w-72 md:w-80 relative group cursor-pointer">
                <div class="w-full h-72 bg-rose-50 flex items-center justify-center overflow-hidden rounded-sm relative">
                    <img src="Picture/Sadia1.jpeg" alt="Sadia" class="w-full h-full object-cover">
                </div>
                <div class="text-center mt-4 font-handwriting text-gray-600 text-2xl romantic-font">
                    My lovely Tanwie
                </div>
            </div>
        </section>

        <section class="glass-card p-10 text-center max-w-xl mx-auto shadow-sm transform hover:scale-[1.01] transition-transform">
            <p class="text-xl md:text-2xl leading-relaxed text-gray-700 serif-font">
                To my <span class="font-bold text-rose-500">Tanwie</span>,<br><br>
                Just like a rose that blooms softly, revealing its beauty one petal at a time, my love for you grows more beautiful every single day. You are the grace in my world and the color in my life.
            </p>
            <p class="mt-6 text-rose-500 romantic-font text-3xl">
                You are my forever Rose.
            </p>
        </section>

        <section class="w-full relative py-10">
            <h3 class="text-4xl text-center text-rose-600 mb-12 romantic-font">Our Story So Far...</h3>
            
            <div class="relative max-w-2xl mx-auto pl-4 md:pl-0">
                <div class="timeline-line-bg"></div>
                <div class="timeline-line-fill" id="progress-line" style="height: 0px;"></div>

                <div id="timeline-container">
                    </div>

                <div id="final-message" class="hidden mt-12 transform transition-all duration-1000 ease-in-out opacity-0 translate-y-10">
                    <div class="glass-card p-8 border-2 border-rose-400 bg-rose-50/90 text-center relative overflow-hidden">
                        <div class="absolute -top-4 -left-4 text-4xl">‚ú®</div>
                        <div class="absolute -bottom-4 -right-4 text-4xl">‚ú®</div>
                        <p class="text-xl md:text-2xl text-gray-800 serif-font leading-relaxed">
                            Look at us now. Breathing oxygen while calling each other our valentine. <br>
                            <span class="font-bold text-rose-600">I am so much blessed to have you my rose üåπ.</span>
                        </p>
                    </div>
                </div>

                <div class="text-center mt-12 relative z-20">
                    <button id="reveal-btn" onclick="revealNextMemory()" class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition hover:scale-110 flex items-center gap-2 mx-auto animate-pulse">
                        <span>‚ù§Ô∏è</span> Unlock Next Memory
                    </button>
                </div>

            </div>
        </section>
        <section class="w-full text-center py-6">
            <h3 class="text-3xl text-rose-500 mb-2 romantic-font">Petal Whispers</h3>
            <p class="text-sm text-gray-500 mb-8">(Tap the petals to reveal secrets)</p>
            
            <div class="relative h-72 w-full flex justify-center items-center">
                <div class="absolute z-20 w-16 h-16 bg-gradient-to-br from-yellow-300 to-yellow-500 rounded-full shadow-lg flex items-center justify-center text-xs text-yellow-900 font-bold border-4 border-yellow-100">
                    Love
                </div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-0 -translate-y-14 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'You make me smile')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-45 -translate-y-10 translate-x-10 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'You are beautiful')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-90 translate-x-14 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'My heart is yours')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-[135deg] translate-x-10 translate-y-10 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'I adore you')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-180 translate-y-14 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'Forever yours')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-[225deg] -translate-x-10 translate-y-10 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'My soft Tanwie')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-[270deg] -translate-x-14 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'Purest soul')"></div>
                <div class="click-petal absolute w-14 h-24 bg-rose-300 rounded-full origin-bottom rotate-[315deg] -translate-x-10 -translate-y-10 cursor-pointer border border-rose-200" onclick="revealSecret(this, 'Happy Rose Day')"></div>
            </div>
            
            <div class="mt-10 flex justify-center">
                <div id="secret-display" class="min-h-[4rem] px-8 py-3 rounded-2xl border border-rose-200 bg-white/90 text-2xl text-rose-600 font-bold romantic-font transition-all duration-300 shadow-sm opacity-0 flex items-center justify-center">
                    </div>
            </div>
        </section>

        <section class="glass-card p-8 w-full max-w-md text-center">
            <h3 class="text-3xl text-rose-600 mb-2 romantic-font">Grow a Rose for Tanwie</h3>
            <p class="text-sm text-gray-600 mb-6">Keep clicking the watering can to help our love bloom!</p>

            <div class="h-64 flex flex-col items-center justify-end relative bg-blue-50/50 rounded-xl mb-4 border-b-4 border-amber-800/30 overflow-hidden">
                <div id="plant-container" class="relative z-10 transition-all duration-500">
                    <div id="plant-svg-wrapper" class="w-32 h-32 flex items-end justify-center">
                        <div class="text-amber-800 text-sm font-bold">üå± Seed Planted</div>
                    </div>
                </div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-4 mb-6 overflow-hidden">
                <div id="water-progress" class="bg-blue-400 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <button onclick="waterPlant()" id="water-btn" class="water-btn bg-blue-400 hover:bg-blue-500 text-white font-bold py-3 px-8 rounded-full shadow-lg flex items-center gap-2 mx-auto transition-colors">
                <span>üöø</span> Water Me!
            </button>
            <p id="bloom-message" class="hidden mt-4 text-xl text-rose-600 font-bold romantic-font animate-bounce">A Beautiful Rose for a Beautiful Girl! üåπ</p>
        </section>

        <section class="w-full">
            <h3 class="text-3xl text-center text-rose-600 mb-8 romantic-font">Tanwie's Rose Coupons</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="coupon-card p-6 rounded-lg text-center cursor-pointer group" onclick="redeemCoupon(this)">
                    <div class="border-2 border-dashed border-rose-300 p-4 h-full flex flex-col justify-center items-center bg-white/50">
                        <span class="text-3xl mb-2 group-hover:scale-125 transition-transform">üçø</span>
                        <h4 class="font-bold text-rose-700 text-lg">One Movie Date</h4>
                    </div>
                    <div class="coupon-stamp text-rose-600 border-4 border-rose-600 rounded-lg p-2 font-bold uppercase tracking-widest bg-white/90">Redeemed</div>
                </div>
                <div class="coupon-card p-6 rounded-lg text-center cursor-pointer group" onclick="redeemCoupon(this)">
                    <div class="border-2 border-dashed border-rose-300 p-4 h-full flex flex-col justify-center items-center bg-white/50">
                        <span class="text-3xl mb-2 group-hover:scale-125 transition-transform">ü´Ç</span>
                        <h4 class="font-bold text-rose-700 text-lg">Unlimited Cuddles</h4>
                    </div>
                    <div class="coupon-stamp text-rose-600 border-4 border-rose-600 rounded-lg p-2 font-bold uppercase tracking-widest bg-white/90">Redeemed</div>
                </div>
                <div class="coupon-card p-6 rounded-lg text-center cursor-pointer group" onclick="redeemCoupon(this)">
                    <div class="border-2 border-dashed border-rose-300 p-4 h-full flex flex-col justify-center items-center bg-white/50">
                        <span class="text-3xl mb-2 group-hover:scale-125 transition-transform">üç´</span>
                        <h4 class="font-bold text-rose-700 text-lg">Chocolate Treat</h4>
                        <p class="text-xs text-gray-500">My treat!</p>
                    </div>
                    <div class="coupon-stamp text-rose-600 border-4 border-rose-600 rounded-lg p-2 font-bold uppercase tracking-widest bg-white/90">Redeemed</div>
                </div>
                <div class="coupon-card p-6 rounded-lg text-center cursor-pointer group" onclick="redeemCoupon(this)">
                    <div class="border-2 border-dashed border-rose-300 p-4 h-full flex flex-col justify-center items-center bg-white/50">
                        <span class="text-3xl mb-2 group-hover:scale-125 transition-transform">ü§ê</span>
                        <h4 class="font-bold text-rose-700 text-lg">I Win This Argument</h4>
                        <p class="text-xs text-gray-500">Use wisely...</p>
                    </div>
                    <div class="coupon-stamp text-rose-600 border-4 border-rose-600 rounded-lg p-2 font-bold uppercase tracking-widest bg-white/90">Redeemed</div>
                </div>
            </div>
        </section>

        <section class="w-full max-w-md text-center py-10 border-t border-rose-200/50 mt-8">
            <p class="text-rose-600 font-bold mb-4 uppercase tracking-widest text-sm">Time left to Propose Day</p>
            <div id="countdown" class="flex justify-center gap-6 mb-8 font-mono text-gray-600 bg-white/40 py-4 px-6 rounded-2xl shadow-sm inline-flex">
                <div class="flex flex-col"><span id="hours" class="text-3xl font-bold text-rose-500">00</span><span class="text-[10px]">Hours</span></div>
                <div class="text-2xl font-bold text-rose-300">:</div>
                <div class="flex flex-col"><span id="minutes" class="text-3xl font-bold text-rose-500">00</span><span class="text-[10px]">Mins</span></div>
                <div class="text-2xl font-bold text-rose-300">:</div>
                <div class="flex flex-col"><span id="seconds" class="text-3xl font-bold text-rose-500">00</span><span class="text-[10px]">Secs</span></div>
            </div>
            <br>
            <a id="day2-link" href="propose.html" class="inline-block" onclick="return checkDate(event)">
                <button id="day2-btn" class="btn-disabled px-10 py-4 rounded-full font-bold shadow-md transition-all duration-300 flex items-center gap-3 text-lg">
                    <span>Next: Day 2</span>
                    <span class="text-2xl">üíç</span>
                </button>
            </a>
            <p id="wait-msg" class="text-xs text-gray-400 mt-3 italic">Patience, my love... unlocks on Feb 8th</p>
        </section>

        <footer class="pb-8 text-center w-full">
            <audio id="background-music" loop autoplay>
                <source src="Songs/rose.mp3" type="audio/mpeg">
            </audio>
            <div class="custom-audio mb-6 hover:scale-105 transition-transform cursor-pointer" onclick="toggleMusic()">
                <span class="text-2xl animate-spin-slow">üéµ</span>
                <div class="flex flex-col items-start mr-2">
                    <span class="text-[10px] text-gray-400 uppercase tracking-wider">Now Playing</span>
                    <span class="text-sm font-bold text-rose-600">Gulabo - Vishal Dadlani</span>
                </div>
            </div>
            <p class="text-sm text-rose-400 font-medium">Made with ‚ù§Ô∏è for Sadia</p>
        </footer>

    </div>

    <script>
        /* --- 1. Background Petals --- */
        function createPetal() {
            const container = document.getElementById('petals-container');
            const petal = document.createElement('div');
            const size = Math.random() * 15 + 10; 
            const left = Math.random() * 100; 
            const duration = Math.random() * 5 + 5; 
            const delay = Math.random() * 5; 
            petal.classList.add('petal');
            petal.style.width = `${size}px`;
            petal.style.height = `${size}px`;
            petal.style.left = `${left}vw`;
            petal.style.animationDuration = `${duration}s`;
            petal.style.animationDelay = `-${delay}s`; 
            const colors = ['#ffb3c1', '#ff8fa3', '#fff0f3', '#c9184a'];
            petal.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            container.appendChild(petal);
            setTimeout(() => { petal.remove(); }, duration * 1000);
        }
        for(let i=0; i<30; i++) createPetal();
        setInterval(createPetal, 300);

        /* --- Auto-play Music --- */
        let musicStarted = false;
        const music = document.getElementById('background-music');
        
        // Try to play on page load
        music.play().catch(() => console.log('Autoplay blocked, waiting for interaction'));
        
        // Play on any interaction if not already playing
        const startMusic = () => {
            if (!musicStarted && music.paused) {
                music.play();
                musicStarted = true;
            }
        };
        
        document.addEventListener('click', startMusic, true);
        document.addEventListener('touchstart', startMusic, true);
        document.addEventListener('scroll', startMusic, true);
        document.addEventListener('mousemove', startMusic, { once: true });

        /* --- 2. TIMELINE LOGIC (UPDATED) --- */
        const memories = [
            { date: "Dec 11", title: "The Beginning", desc: "Got your Contact via track team" },
            { date: "Dec 12", title: "First Words", desc: "Our first online convo regarding ramp walk" },
            { date: "Dec 17", title: "Teamwork", desc: "We worked together first time" },
            { date: "Dec 19", title: "The Spark", desc: "Our first chai date and late night Convo (felt you are the one)" },
            { date: "Dec 23", title: "Surprise", desc: "Our out of nowhere jubilee park meetup ü§≠" },
            { date: "Dec 25", title: "Festive Love", desc: "Our first special Christmas" },
            { date: "Dec 29", title: "The Bond", desc: "Our special special movie date which binded us strongly together" },
            { date: "Jan 8", title: "Warmth", desc: "That zorrr ki jhappi uff ü•πü´Ç" }
        ];

        let currentMemoryIndex = 0;
        const timelineContainer = document.getElementById('timeline-container');

        // Function to create HTML for a memory
        function createMemoryHTML(memory, index) {
            const isLeft = index % 2 === 0;
            // Left Item Structure
            if(isLeft) {
                return `
                <div class="timeline-item flex items-center mb-12 relative z-10">
                    <div class="w-1/2 text-right pr-8 hidden md:block">
                        <h4 class="text-xl font-bold text-rose-500">${memory.date}</h4>
                        <p class="text-gray-500 text-sm italic">${memory.title}</p>
                    </div>
                    <div class="w-4 h-4 rounded-full bg-rose-500 border-4 border-white shadow mx-auto md:mx-0 absolute left-0 md:left-1/2 md:-translate-x-1/2 z-20"></div>
                    <div class="w-full md:w-1/2 pl-8">
                        <div class="bg-white p-4 rounded-lg shadow-md border-l-4 border-rose-400">
                            <span class="md:hidden text-xs text-rose-500 font-bold block mb-1">${memory.date}</span>
                            <p class="text-gray-700">${memory.desc}</p>
                        </div>
                    </div>
                </div>`;
            } else {
                // Right Item Structure (reversed on desktop)
                return `
                <div class="timeline-item flex items-center mb-12 relative z-10 flex-row-reverse md:flex-row">
                    <div class="w-full md:w-1/2 pr-0 md:pr-8 pl-8 md:pl-0">
                        <div class="bg-white p-4 rounded-lg shadow-md border-r-4 border-pink-400 text-right">
                            <span class="md:hidden text-xs text-pink-500 font-bold block mb-1 text-left">${memory.date}</span>
                            <p class="text-gray-700">${memory.desc}</p>
                        </div>
                    </div>
                    <div class="w-4 h-4 rounded-full bg-pink-500 border-4 border-white shadow mx-auto md:mx-0 absolute left-0 md:left-1/2 md:-translate-x-1/2 z-20"></div>
                    <div class="w-1/2 pl-8 hidden md:block">
                        <h4 class="text-xl font-bold text-pink-500">${memory.date}</h4>
                        <p class="text-gray-500 text-sm italic">${memory.title}</p>
                    </div>
                </div>`;
            }
        }

        // Initialize: Show first 2 memories
        function initTimeline() {
            // Render index 0
            timelineContainer.insertAdjacentHTML('beforeend', createMemoryHTML(memories[0], 0));
            // Render index 1
            timelineContainer.insertAdjacentHTML('beforeend', createMemoryHTML(memories[1], 1));
            
            // Fade them in
            setTimeout(() => {
                const items = document.querySelectorAll('.timeline-item');
                items[0].classList.add('visible');
                items[1].classList.add('visible');
            }, 100);

            currentMemoryIndex = 2; // Next one to reveal is index 2
            updateProgressLine();
        }

        function revealNextMemory() {
            const btn = document.getElementById('reveal-btn');
            
            // Check if we have more memories
            if (currentMemoryIndex < memories.length) {
                // Add the HTML
                const html = createMemoryHTML(memories[currentMemoryIndex], currentMemoryIndex);
                timelineContainer.insertAdjacentHTML('beforeend', html);
                
                // Get the newly added element
                const newItems = document.querySelectorAll('.timeline-item');
                const lastItem = newItems[newItems.length - 1];

                // Trigger reflow/fade-in
                setTimeout(() => {
                    lastItem.classList.add('visible');
                    // Smooth scroll to it
                    lastItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 50);

                currentMemoryIndex++;
                updateProgressLine();

                // If this was the last memory, change button text
                if (currentMemoryIndex === memories.length) {
                    btn.innerHTML = "‚ú® One Last Surprise... ‚ú®";
                    btn.classList.remove('bg-rose-500');
                    btn.classList.add('bg-gold-500', 'text-white', 'border-2', 'border-yellow-200');
                    btn.style.backgroundColor = "#ffb703"; // Gold
                }
            } else {
                // User clicked the button AFTER all memories were shown
                showFinalMessage();
                btn.style.display = 'none'; // Hide button
            }
        }

        function showFinalMessage() {
            const finalMsg = document.getElementById('final-message');
            finalMsg.classList.remove('hidden');
            setTimeout(() => {
                finalMsg.classList.remove('opacity-0', 'translate-y-10');
                finalMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Extra Confetti for the finale
                for(let i=0; i<30; i++) {
                    setTimeout(() => createConfetti(), i * 100);
                }
            }, 100);
        }

        function updateProgressLine() {
            // Calculate height based on number of items
            // Approx 100px per item
            const height = currentMemoryIndex * 120;
            document.getElementById('progress-line').style.height = `${height}px`;
        }

        // Start
        initTimeline();


        /* --- 3. Confetti Helper (Simple) --- */
        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10px';
            confetti.style.width = '10px';
            confetti.style.height = '10px';
            confetti.style.backgroundColor = ['#ff0000', '#ffd700', '#ff69b4'][Math.floor(Math.random()*3)];
            confetti.style.zIndex = '9999';
            confetti.style.transition = 'top 3s ease-in, transform 3s ease-in';
            document.body.appendChild(confetti);
            
            setTimeout(() => {
                confetti.style.top = '110vh';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            }, 10);
            setTimeout(() => confetti.remove(), 3000);
        }

        /* --- 4. Other Logic (Petals, Water, Countdown) --- */
        function revealSecret(element, text) {
            if(element.classList.contains('revealed')) return;
            element.classList.add('revealed');
            const display = document.getElementById('secret-display');
            display.style.opacity = '0';
            setTimeout(() => { display.innerText = text; display.style.opacity = '1'; }, 300);
        }

        let waterCount = 0;
        function waterPlant() {
            if (waterCount >= 5) return;
            waterCount++;
            document.getElementById('water-progress').style.width = `${(waterCount / 5) * 100}%`;
            const wrapper = document.getElementById('plant-svg-wrapper');
            if (waterCount === 1) wrapper.innerHTML = `<svg viewBox="0 0 100 100" class="w-full h-full text-green-500 fill-current"><path d="M50 100 V 70 Q 30 50 40 40" stroke="currentColor" stroke-width="4" fill="none"/><circle cx="40" cy="40" r="5" /></svg>`;
            else if (waterCount === 3) wrapper.innerHTML = `<svg viewBox="0 0 100 100" class="w-full h-full text-green-600 fill-current"><path d="M50 100 V 50" stroke="currentColor" stroke-width="4"/><path d="M50 50 Q 70 30 50 20 Q 30 30 50 50" fill="#c9184a"/></svg>`;
            else if (waterCount === 5) {
                wrapper.innerHTML = `<svg viewBox="0 0 100 100" class="w-full h-full animate-bounce"><path d="M50 100 V 60" stroke="green" stroke-width="4"/><path d="M50 60 Q 80 20 50 20 Q 20 20 50 60" fill="#e01e37"/><circle cx="50" cy="40" r="15" fill="#ff006e" opacity="0.8"/></svg>`;
                document.getElementById('water-btn').innerText = "‚ú® Bloomed! ‚ú®";
                document.getElementById('bloom-message').classList.remove('hidden');
            }
        }

        function redeemCoupon(card) {
            if(card.classList.contains('redeemed')) return;
            if(confirm("Redeem this coupon?")) card.classList.add('redeemed');
        }

        /* Countdown */
        function updateCountdown() {
            const now = new Date();
            const target = new Date(now.getFullYear(), 1, 8, 0, 0, 0);
            const diff = target - now;
            if (diff <= 0) {
                document.getElementById('countdown').innerHTML = "<span class='text-rose-600 font-bold'>The day is here!</span>";
                const btn = document.getElementById('day2-btn');
                btn.classList.remove('btn-disabled');
                btn.classList.add('bg-rose-500', 'text-white', 'hover:bg-rose-600', 'transform', 'hover:scale-105');
                btn.removeAttribute('disabled');
                document.getElementById('wait-msg').style.display = 'none';
                return;
            }
            document.getElementById('hours').innerText = String(Math.floor((diff % (86400000)) / 3600000)).padStart(2, '0');
            document.getElementById('minutes').innerText = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
            document.getElementById('seconds').innerText = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
        }
        setInterval(updateCountdown, 1000); updateCountdown();

        function checkDate(e) {
            if (document.getElementById('day2-btn').classList.contains('btn-disabled')) {
                e.preventDefault(); alert("Wait for Propose Day! ü§´"); return false;
            } return true;
        }

        /* Pet Cat */
        const kittyMsgs = ["Purrr... I love you!", "You look beautiful! üòª", "Sadia is the best!", "Happy Rose Day!"];
        function petTheCat() {
            const bubble = document.getElementById('kitty-bubble');
            bubble.innerText = kittyMsgs[Math.floor(Math.random() * kittyMsgs.length)];
            bubble.classList.add('show');
            setTimeout(() => bubble.classList.remove('show'), 3000);
        }
        function toggleMusic() {
            const music = document.getElementById('background-music');
            if (music.paused) {
                music.play();
            } else {
                music.pause();
            }
        }

        /* Sparkle Cursor */
        document.addEventListener('mousemove', (e) => {
            if(Math.random() > 0.1) return;
            const s = document.createElement('div'); s.classList.add('sparkle');
            s.style.left = (e.pageX + Math.random()*20-10)+'px'; s.style.top = (e.pageY + Math.random()*20-10)+'px';
            document.body.appendChild(s); setTimeout(()=>s.remove(), 800);
        });

    </script>
</body>
</html>